<!doctype html>
<html lang="ja">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>é€šè²¨ãƒšã‚¢ãƒãƒ£ãƒ¼ãƒˆï¼ˆTradingViewï¼‰</title>
<style>
  :root{ --accent:#22c55e; --border:#e5e7eb; --card:#fff; --bg:#f6f7f9; }
  body{ margin:0; background:var(--bg); font-family:system-ui,-apple-system,"Hiragino Sans","Noto Sans JP",sans-serif; color:#0f172a }
  .wrap{ max-width:980px; margin:24px auto 56px; padding:0 16px }
  .card{ background:var(--card); border:1px solid var(--border); border-radius:16px; padding:16px; box-shadow:0 1px 6px rgba(0,0,0,.04) }
  h1{ font-size:1.25rem; margin:0 0 12px }
  .row{ display:grid; gap:12px; align-items:center }
  .row-3{ grid-template-columns:1fr 60px 1fr }
  @media (max-width:640px){ .row-3{ grid-template-columns:1fr 52px 1fr } }
  select{ width:100%; padding:14px 12px; border:1px solid var(--border); border-radius:14px; background:#fff; font-size:1rem }
  .swap{ display:flex; align-items:center; justify-content:center }
  .swap button{ width:100%; height:48px; border-radius:12px; border:0; background:#ecfdf5; color:#065f46; font-size:20px; cursor:pointer }
  #chart{ margin-top:16px }
  .list{ display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:10px; margin-top:18px }
  .item{ display:flex; gap:10px; align-items:center; padding:10px 12px; border:1px solid var(--border); border-radius:12px; background:#fff }
  .flag{ font-size:22px }
  .code{ font-weight:800; width:56px }
  .muted{ color:#64748b }
</style>

<div class="wrap">
  <div class="card">
    <h1>é€šè²¨ã‚’é¸æŠ</h1>
    <div class="row row-3">
      <select id="base"></select>
      <div class="swap"><button id="btnSwap" title="å…¥ã‚Œæ›¿ãˆ">â†”ï¸</button></div>
      <select id="quote"></select>
    </div>
    <div id="chart"></div>
  </div>

  <div class="card" style="margin-top:16px">
    <h1>é€šè²¨ã‚³ãƒ¼ãƒ‰è§£èª¬</h1>
    <div id="list" class="list"></div>
  </div>
</div>

<script src="https://s3.tradingview.com/tv.js"></script>
<script>
  const currencies = [
    {code:"USD", flag:"ğŸ‡ºğŸ‡¸", country:"ã‚¢ãƒ¡ãƒªã‚«", name:"ç±³ãƒ‰ãƒ«"},
    {code:"JPY", flag:"ğŸ‡¯ğŸ‡µ", country:"æ—¥æœ¬",     name:"æ—¥æœ¬å††"},
    {code:"EUR", flag:"ğŸ‡ªğŸ‡º", country:"æ¬§å·é€£åˆ", name:"ãƒ¦ãƒ¼ãƒ­"},
    {code:"GBP", flag:"ğŸ‡¬ğŸ‡§", country:"ã‚¤ã‚®ãƒªã‚¹", name:"è‹±ãƒãƒ³ãƒ‰"},
    {code:"AUD", flag:"ğŸ‡¦ğŸ‡º", country:"ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢", name:"è±ªãƒ‰ãƒ«"},
    {code:"CAD", flag:"ğŸ‡¨ğŸ‡¦", country:"ã‚«ãƒŠãƒ€",   name:"ã‚«ãƒŠãƒ€ãƒ‰ãƒ«"},
    {code:"CHF", flag:"ğŸ‡¨ğŸ‡­", country:"ã‚¹ã‚¤ã‚¹",   name:"ã‚¹ã‚¤ã‚¹ãƒ•ãƒ©ãƒ³"},
    {code:"HKD", flag:"ğŸ‡­ğŸ‡°", country:"é¦™æ¸¯",     name:"é¦™æ¸¯ãƒ‰ãƒ«"},
    {code:"CNY", flag:"ğŸ‡¨ğŸ‡³", country:"ä¸­å›½",     name:"äººæ°‘å…ƒ"},
    {code:"KRW", flag:"ğŸ‡°ğŸ‡·", country:"éŸ“å›½",     name:"éŸ“å›½ã‚¦ã‚©ãƒ³"},
    {code:"BTC", flag:"â‚¿",   country:"æš—å·è³‡ç”£", name:"ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³"},
    {code:"XAU", flag:"ğŸ¥‡",   country:"è²´é‡‘å±",   name:"ã‚´ãƒ¼ãƒ«ãƒ‰ï¼ˆé‡‘ï¼‰"}
  ];

  const $base  = document.getElementById('base');
  const $quote = document.getElementById('quote');
  currencies.forEach(c => {
    $base.append(new Option(c.code, c.code));
    $quote.append(new Option(c.code, c.code));
  });
  $base.value  = "USD";
  $quote.value = "JPY";

  const $list = document.getElementById('list');
  $list.innerHTML = currencies.map(c => `
    <div class="item">
      <span class="flag">${c.flag}</span>
      <b class="code">${c.code}</b>
      <div>
        <div>${c.country}</div>
        <div class="muted">${c.name}</div>
      </div>
    </div>
  `).join("");

  function renderChart() {
    if ($base.value === $quote.value) return;
    let symbol;

    // BTCã¯USDTå›ºå®š
    if ($base.value === "BTC" || $quote.value === "BTC") {
      symbol = "BINANCE:BTCUSDT";
    }
    // GOLDã¯ãƒ‰ãƒ«å»ºã¦å›ºå®š
    else if ($base.value === "XAU" || $quote.value === "XAU") {
      symbol = "TVC:GOLD";
    }
    // é€šå¸¸ã®FXãƒšã‚¢
    else {
      symbol = `FX_IDC:${$base.value}${$quote.value}`;
    }

    const container = document.getElementById('chart');
    container.innerHTML = "";
    new TradingView.widget({
      container_id: "chart",
      symbol,
      interval: "60",
      width: "100%",
      height: 440,
      locale: "ja",
      theme: "light"
    });
  }

  renderChart();

  $base.addEventListener('change', renderChart);
  $quote.addEventListener('change', renderChart);
  document.getElementById('btnSwap').addEventListener('click', () => {
    const tmp = $base.value; $base.value = $quote.value; $quote.value = tmp;
    renderChart();
  });
</script>
</html>
